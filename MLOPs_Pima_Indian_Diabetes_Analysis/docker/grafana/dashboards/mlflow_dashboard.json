{
  "dashboard": {
    "id": null,
    "title": "MLflow Model Metrics",
    "timezone": "browser",
    "panels": [
      {
        "type": "stat",
        "title": "Best Model AUC",
        "targets": [
          {
            "rawSql": "SELECT\n  m.value as auc\nFROM metrics m\nJOIN runs r ON r.run_uuid = m.run_uuid\nJOIN tags t ON t.run_uuid = r.run_uuid\nWHERE m.key LIKE '%_auc'\n  AND t.key = 'best_model'\nORDER BY r.start_time DESC\nLIMIT 1;",
            "refId": "A"
          }
        ],
        "gridPos": { "x": 0, "y": 0, "w": 6, "h": 5 },
        "options": {
          "reduceOptions": { "calcs": ["last"], "fields": "", "values": false },
          "colorMode": "value",
          "graphMode": "none",
          "justifyMode": "auto"
        },
        "fieldConfig": {
          "defaults": {
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "red", "value": null },
                { "color": "green", "value": 0.85 }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        }
      },
      {
        "type": "timeseries",
        "title": "AUC Trends Over Time",
        "targets": [
          {
            "rawSql": "SELECT\n  m.step as time,\n  m.value as auc,\n  m.key as model\nFROM metrics m\nWHERE m.key LIKE '%_auc'\nORDER BY m.step;",
            "refId": "B"
          }
        ],
        "gridPos": { "x": 6, "y": 0, "w": 18, "h": 10 },
        "fieldConfig": {
          "defaults": { "unit": "none" },
          "overrides": []
        },
        "options": {
          "legend": { "displayMode": "list", "placement": "bottom" },
          "tooltip": { "mode": "multi", "sort": "none" }
        }
      },
      {
        "type": "table",
        "title": "All Model AUCs",
        "targets": [
          {
            "rawSql": "SELECT\n  r.run_uuid,\n  m.key as model_name,\n  m.value as auc\nFROM metrics m\nJOIN runs r ON r.run_uuid = m.run_uuid\nWHERE m.key LIKE '%_auc'\nORDER BY m.value DESC;",
            "refId": "C"
          }
        ],
        "gridPos": { "x": 0, "y": 10, "w": 12, "h": 8 },
        "options": {
          "showHeader": true,
          "sortBy": [{ "desc": true, "displayName": "auc" }]
        },
        "fieldConfig": {
          "defaults": {
            "custom": {},
            "unit": "none"
          },
          "overrides": []
        }
      },
      {
        "type": "stat",
        "title": "AUC Alert Threshold",
        "targets": [
          {
            "rawSql": "SELECT\n  m.value as auc\nFROM metrics m\nJOIN runs r ON r.run_uuid = m.run_uuid\nJOIN tags t ON t.run_uuid = r.run_uuid\nWHERE m.key LIKE '%_auc'\n  AND t.key = 'best_model'\nORDER BY r.start_time DESC\nLIMIT 1;",
            "refId": "D"
          }
        ],
        "gridPos": { "x": 12, "y": 10, "w": 6, "h": 5 },
        "options": {
          "reduceOptions": { "calcs": ["last"] },
          "colorMode": "value",
          "graphMode": "none",
          "justifyMode": "auto"
        },
        "fieldConfig": {
          "defaults": {
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "red", "value": null },
                { "color": "orange", "value": 0.85 }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        }
      }
    ],
    "schemaVersion": 37,
    "version": 1,
    "refresh": "10s",
    "time": {
      "from": "now-30d",
      "to": "now"
    }
  },
  "overwrite": true
}

